/**
 * FloodlightJS v1.0.0
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
class FloodLight{constructor(a){let g=this,c="bisar-"+F(8)+"-";a&&a.cssClassPrefix&&(c=a.cssClassPrefix+"-");let h=c+"wrapper",i=c+"dropdown",j=c+"input",k=c+"item",l=c+"item",m=c+"search",d="#fff",e="#efefef",f="#1A1A40";if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(d="#111",e="#231e24",f="#efefef"),a&&a.theme){let b=Object.keys(a.theme);"light"==b[0]?(d="#fff",e="#efefef",f="#1A1A40"):"dark"==b[0]&&(d="#111",e="#231e24",f="#efefef"),a.theme[b[0]].primary&&(d=a.theme[b[0]].primary),a.theme[b[0]].primary&&(e=a.theme[b[0]].secondary),a.theme[b[0]].fontColor&&(f=a.theme[b[0]].fontColor)}let n=[],o={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,"Pause/Break":19,"Caps Lock":20,Esc:27,Space:32,"Page Up":33,"Page Down":34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,"0":48,"1":49,"2":50,"3":51,"4":52,"5":53,"6":54,"7":55,"8":56,"9":57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Windows:91,"Right Click":93,"Numpad 0":96,"Numpad 1":97,"Numpad 2":98,"Numpad 3":99,"Numpad 4":100,"Numpad 5":101,"Numpad 6":102,"Numpad 7":103,"Numpad 8":104,"Numpad 9":105,"Numpad *":106,"Numpad +":107,"Numpad -":109,"Numpad .":110,"Numpad /":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"Num Lock":144,"Scroll Lock":145,"My Computer":182,"My Calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};function p(a,g){let i=D();a.innerHTML="";let h=g.params,c=g.desc;for(let b=0;b<h.length;b++){let j=h[b];c=c.replaceAll("{"+j+"}","<i>"+i[b]+"</i>")}return a.classList.add(l),a.innerHTML=c,a.style.cursor="pointer",a.style.padding="15px 10px",a.style.color=f,a.style.backgroundColor=d,a.addEventListener("mouseover",function(a){let b=a.target||a.srcElement;b.style.backgroundColor=e,b.setAttribute("selected",!0)},!1),a.addEventListener("mouseout",function(a){let b=a.target||a.srcElement;b.style.backgroundColor=d,b.removeAttribute("selected")},!1),a.addEventListener("click",z,!1),a}function q(g){document.getElementById(i).innerHTML="";let d=D(),c=B().parameters;if(0!=d.length&&0!=c.length){document.addEventListener("keydown",A,!1);for(let a=0;a<c.length;a++){let f=c[a];if(f.params.length>d.length)continue;let b=document.createElement("div");b.setAttribute("id",k+a),b.setAttribute("ix",a),b=p(b,f),a!=c.length-1&&(b.style.borderBottom="1px solid "+e),g.appendChild(b)}E(0)}}function r(b){if(null!==document.getElementById(i)){q(document.getElementById(i));return}let a=document.createElement("div");a.setAttribute("id",i),a.style.width="100%",a.style.maxHeight="400px",a.style.position="absolute",a.style.top="50px",a.style.borderRadius="8px",a.style.overflowY="auto",a.style.backgroundColor=d,a.style.border="2px solid "+e,b.parentNode.appendChild(a)}function s(a){if((a.target||a.srcElement).value.length>0)r(document.getElementById(j));else{let b=document.getElementById(i);b.parentNode.removeChild(b)}}function t(b){let a=document.createElement("input");a.setAttribute("id",j),a.style.width="100%",a.style.height="45px",a.style.padding="10px 5px",a.style.fontSize="16px",a.style.color=f,a.style.borderRadius="8px",a.style.boxSizing="border-box",a.style.outline="none",a.style.backgroundColor=d,a.style.border="2px solid "+e,a.setAttribute("placeholder",B().name),a.value="",b.appendChild(a),setTimeout(function(){document.getElementById(j).focus()},10),document.getElementById(j).addEventListener("input",s)}function u(b){let a=document.createElement("div");a.setAttribute("id",m),a.style.left="50%",a.style.width="40%",a.style.top="30%",a.style.position="absolute",a.style.transform="translate(-50%,-50%)",b.appendChild(a),t(document.getElementById(m))}function v(b){if(null===document.getElementById(h)){let a=document.createElement("div");a.setAttribute("id",h),a.style.position="fixed",a.style.zIndex=1e7,a.style.left="0%",a.style.top="0%",a.style.width="100vw",a.style.height="100vh",a.style.background="rgba(0,0,0, .3)",a.setAttribute("ix",b),document.body.appendChild(a),u(document.getElementById(h))}}function w(){let a=document.getElementById(h);if(null!==a){a.parentNode.removeChild(a),document.removeEventListener("keydown",A,!1);return}}function x(f){let b=document.getElementsByClassName(l),a=-1;for(let c=0;c<b.length;c++){let e=b[c];e.style.backgroundColor=d,e.getAttribute("selected")&&(a=c),e.removeAttribute("selected")}"up"==f?(a-=1)<0&&(a=b.length-1):"down"==f&&(a+=1)>=b.length&&(a=0),E(a)}function y(){let b=document.getElementsByClassName(l),c=-1;for(let a=0;a<b.length;a++){let d=b[a];if(d.getAttribute("selected")){c=a;break}}-1!=c&&z()}function z(c){let a;a=c?C(parseInt((c.target||c.srcElement).getAttribute("ix"))):C();let e=D(),d={};for(let b=0;b<a.params.length;b++){let f=a.params[b];d[f]=e[b]}a.fn(d),w()}function A(a){40==a.keyCode?x("down"):38==a.keyCode?x("up"):13==a.keyCode&&y()}function B(){return n[parseInt(document.getElementById(h).getAttribute("ix"))]}function C(b){if(b)return B().parameters[b];let c=-1,d=document.getElementsByClassName(l);for(let a=0;a<d.length;a++){let e=d[a];if(e.getAttribute("selected")){c=a;break}}return B().parameters[c]}function D(){return document.getElementById(j).value.trim().split(",").map(a=>a.trim())}function E(c){let a=document.getElementsByClassName(l);for(let b=0;b<a.length;b++){let f=a[b];f.style.backgroundColor=d}a[c].setAttribute("selected",!0),a[c].style.backgroundColor=e}function F(d){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=b.length,c=0;c<d;c++)a+=b.charAt(Math.floor(Math.random()*e));return a}g.run=function(){for(let a=0;a<n.length;a++){let b=n[a];document.addEventListener("keydown",function(c){c.keyCode==o[b.key.toUpperCase()]&&c.shiftKey?v(a):"Escape"===c.key&&w()})}},g.addCommand=function(b,c){let a=new Object;return a.addAction=function(a,b,c){void 0===this.parameters&&(this.parameters=[]),this.parameters.push({params:a,desc:b,fn:c})},a.key=b,a.name=c,n.push(a),n[n.length-1]}}}